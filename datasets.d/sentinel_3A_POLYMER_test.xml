<dataset type="EDDGridFromNcFiles" datasetID="sentinel_3A_POLYMER_test" active="false">
    <reloadEveryNMinutes>10080</reloadEveryNMinutes>
    <updateEveryNMillis>10000</updateEveryNMillis>
    <fileDir>/algae_explorer/5_erddap_data</fileDir>
    <fileNameRegex>polymer_mosaic_output\.nc</fileNameRegex>
    <recursive>true</recursive>
    <pathRegex>.*</pathRegex>
    <metadataFrom>last</metadataFrom>
    <matchAxisNDigits>20</matchAxisNDigits>
    <fileTableInMemory>false</fileTableInMemory>
    <accessibleViaWMS>true</accessibleViaWMS>
    <!-- sourceAttributes>
        <att name="Conventions">CF-1.4</att>
        <att name="metadata_profile">beam</att>
        <att name="metadata_version">0.5</att>
        <att name="product_type">BEAM_MOSAIC</att>
        <att name="TileSize">489:382</att>
    </sourceAttributes -->
    <addAttributes>
        <att name="cdm_data_type">Grid</att>
        <att name="Conventions">CF-1.6, COARDS, ACDD-1.3</att>
        <att name="infoUrl">???</att>
        <att name="institution">Hakai Institute</att>
        <att name="keywords">bitmask, bitmask_count, chl, chl_conc, chl_conc_count, chlorophyll, conc, coordinate, count, data, else, exp10, latitude, latitude_count, local, logchl, logchl_count, longitude, longitude_count, nan, source, spm, SPM_count, then</att>
        <att name="license">[standard]</att>
        <att name="standard_name_vocabulary">CF Standard Name Table v81</att>
        <att name="citation">Costa, M., &amp; Hakai Institute. (2023). Sentinel-3A OLCI Imagery - Automated daily POLYMER processed satellite chlorophyll concentrations for coastal British Columbia and southeast Alaska (Version v1). Hakai Institute</att>
        <att name="creator_name">Hakai Institute</att>
        <att name="creator_url">https://www.hakai.org/</att>
        <att name="creator_institution">Hakai Institute</att>
        <att name="creator_type">institution</att>
        <att name="publisher_name">Hakai Institute</att>
        <att name="publisher_institution">Hakai Institute</att>
        <att name="publisher_url">https://www.hakai.org/</att>
        <att name="publisher_type">institution</att>
        <att name="contributor_name">Maycira Costa - Spectral Laboratory</att>
        <att name="contributor_role">Principal Investigator - Collaborator - Originator</att>
        <att name="date_created">2023-08-01</att>
        <att name="geospatial_lat_max">59.5</att>
        <att name="geospatial_lat_min">47</att>
        <att name="geospatial_lon_max">-121.5</att>
        <att name="geospatial_lon_min">-139</att>
        <att name="geospatial_vertical_min">0</att>
        <att name="geospatial_vertical_max">5</att>
        <att name="institution">Hakai Institute</att>
        <att name="project">Oceanography</att>
        <att name="product_version">1</att>
        <att name="license">https://creativecommons.org/licenses/by/4.0</att>
        <att name="id">d1bef0b7-4d15-4bc1-bf34-faca6352891f</att>
        <att name="naming_authority">ca.cioos</att>
        <att name="references">https://doi.org/</att>
        <att name="keywords">remote sensing,chlorophyll a,phytoplankton,coastal zone,water quality,abundance and biomass</att>
        <att name="platform">satellite</att>
        <att name="platform_vocabulary">http://vocab.nerc.ac.uk/collection/L06/current/</att>
        <att name="summary">This is an ongoing dataset of fully processed daily Sentinel 3A and 3B chlorophyll-a (Chla) and suspended particulate matter (SPM) imagery for coastal and offshore British Columbia (BC) and Southeast Alaska waters. Setinel 3A and 3B are European Space Agency (ESA) oceanography satellites jointly operated with the European Organization for the Exploitation of Meteorological Satellites (EUMETSAT). The ocean and land colour instrument (OLCI) onboard both satellites has a 300m spatial resolution, near daily temporal coverage (when 3A and 3B are combined), 21 spectral bands from 400-1200nm, high signal-to-noise ratio and an off-nadir swath centered to minimize ocean sun glint. These features make the instruments well suited to retrievals of biogeochemical products from optically complex coastal waters.

            At the University of Victoria (BC, Canada), the SPECTRAL remote sensing laboratory has performed extensive evaluation of methods for the best regional Chla and SPM retrievals. Validation with in-situ data showed the best results using Level-1 imagery processed with the POLYnomial based algorithm applied to MERIS (POLYMER) processor. Following validation, the SPECTRAL laboratory and the MOD(ularity) Squad developed an automated processing system that: 1) downloads imagery from the Marine Copernicus Online Data Access (CODA) web service; 2) applies POLYMER and flagging and; 3) mosaics the imagery for fully processed Chla and SPM concentrations over the study region. Additionally, an interactive public web interface was created to view the near real time outputs at www.algaeexplorer.ca (provided in resources). Full validation details are provided in Giannini et al. (2021) and processing details in Jacoby et al. (2019) and Marchese et al. (2022) referenced in the resources.
            
            In 2022, the Hakai Institute took responsibility of the project, added processing of 3B imagery, created automated submission to the Canadian Integrated Ocean Observing System (CIOOS) and updated the Algae Explorer web interface.
            
            This product provides the best known regional OLCI Chla and SPM retrievals shown to have low systematic biases (&lt;1%) and follow expected seasonal and spatial trends; however, relative percent difference between validation data and satellite retrievals was high notably for Chla (~83%) due to the underestimation of high Chla concentrations and potentially an artifact of spatial-temporal mismatches between validation samples and image pixels. The SPECTRAL laboratory has performed initial radiometric comparisons of 3A and 3B imagery and shown highly comparable data; however, comparison of biogeochemical outputs is still in progress. Further uncertainties exist in high turbidity regions (Fraser River plume and fjords) where uncorrectable poor-quality pixels are sometimes observed. Additionally, an unresolved data striping issue is periodically present and observed as a narrow band of distorted pixels, which sometimes evades the land mask and, crosses images diagonally above Vancouver Island. Efforts are underway to correct this issue. Data users should consider these uncertainties and issues when using the data. 
            
            Satellite remote sensing is increasingly used to study surface ocean processes at the spatial and temporal resolutions required for understanding long term variability under a changing climate. Chlorophyll-a is the most widely used measure of phytoplankton biomass and crucial for understanding phytoplankton which are the base of the marine food web and control ocean biogeochemical cycling. Suspended particulate matter is a key water quality indicator (i.e. turbidity) with increased concentrations reducing light availability to aquatic species. 
            
            Funding for validation and automation development was provided by the UBC/UVic Hakai Coastal Initiative postdoctoral fellowship, NSERC NCE Marine Environmental Observation Prediction and Response (MEOPAR) network, Canadian Space Agency (CSA), Canadian Foundation for Innovation (CFI) and NSERC Discover Grant awarded to Maycira Costa. 
            
            It is requested that Giannini et al. (2021), Jacoby et al. (2019) and Marchese et al. (2022) are referenced if data is used for published research and the ESA acknowledged as the data provider.</att>
            <att name="title">Daily satellite (Sentinel 3A and 3B) chlorophyll and suspended matter concentrations for coastal British Columbia and southeast Alaska</att>
    </addAttributes>
    <axisVariable>
        <sourceName>***pathName,timeFormat=yyyy/MM/dd,/algae_explorer/5_erddap_data/(\d{4}/\d{2}/\d{2})/polymer_mosaic_output\.nc,1</sourceName>
        <destinationName>time</destinationName>
        <!-- sourceAttributes>
        </sourceAttributes -->
        <addAttributes>
            <att name="long_name">Time</att>
            <att name="standard_name">time</att>
        </addAttributes>
    </axisVariable>
    <axisVariable>
        <sourceName>latitude</sourceName>
        <destinationName>latitude</destinationName>
        <!-- sourceAttributes>
        </sourceAttributes -->
        <addAttributes>
            <att name="long_name">Latitude</att>
            <att name="standard_name">latitude</att>
            <att name="units">degrees_north</att>
        </addAttributes>
    </axisVariable>
    <axisVariable>
        <sourceName>longitude</sourceName>
        <destinationName>longitude</destinationName>
        <!-- sourceAttributes>
        </sourceAttributes -->
        <addAttributes>
            <att name="long_name">Longitude</att>
            <att name="standard_name">longitude</att>
            <att name="units">degrees_east</att>
        </addAttributes>
    </axisVariable>
    <dataVariable>
        <sourceName>chl_conc</sourceName>
        <destinationName>chl_conc</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="intList">489 382</att>
            <att name="coordinates">lat lon</att>
            <att name="long_name">if logchl&gt;=1.602 then NaN else exp10(logchl)</att>
            <att name="valid_pixel_expression">chl_conc_count &gt; 0</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="_FillValue" type="float">0</att>
            <att name="colorBarMaximum" type="float">40.0</att>
            <att name="colorBarMinimum" type="float">0.15</att>
            <att name="colorBarScale">Log</att>
            <att name="colorBarPalette">Spectrum</att>
            <att name="long_name">Chlorophyll-A Concentration</att>
            <att name="standard_name">mass_concentration_of_chlorophyll_a_in_sea_water</att>
            <att name="units">mg/m^3</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>SPM</sourceName>
        <destinationName>SPM</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="intList">489 382</att>
            <att name="coordinates">lat lon</att>
            <att name="long_name">if logchl&gt;=1.602 then NaN else exp10(logchl)</att>
            <att name="valid_pixel_expression">chl_conc_count &gt; 0</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="_FillValue" type="float">0</att>
            <att name="colorBarMaximum" type="float">50.0</att>
            <att name="colorBarMinimum" type="float">0.02</att>
            <att name="colorBarScale">Log</att>
            <att name="colorBarPalette">Spectrum</att>
            <att name="long_name">Suspended Particulate Matter</att>
            <att name="units">mg/m^3</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>bitmask</sourceName>
        <destinationName>bitmask</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="intList">489 382</att>
            <att name="coordinates">lat lon</att>
            <att name="long_name">bitmask</att>
            <att name="valid_pixel_expression">bitmask_count &gt; 0</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="_FillValue" type="float">0</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>bitmask_count</sourceName>
        <destinationName>bitmask_count</destinationName>
        <dataType>int</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="intList">489 382</att>
            <att name="coordinates">lat lon</att>
            <att name="long_name">Count of bitmask</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="_FillValue" type="int">0</att>
            <att name="coordinates">null</att>
        </addAttributes>
    </dataVariable>
</dataset>
